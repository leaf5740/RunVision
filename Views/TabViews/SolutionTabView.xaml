<UserControl x:Class="RunVision.Views.TabViews.SolutionTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:RunVision.Views.TabViews"
              xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:prism="http://prismlibrary.com/"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- 方案流程列表 -->
        <GroupBox Grid.Column="0" Header="运行流程排序" Style="{StaticResource GroupBoxTab}" Margin="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DataGrid 
                    Grid.Row="0"
                    HeadersVisibility="All"
                    RowHeaderWidth="35"
                    hc:DataGridAttach.ShowRowNumber="True"
                    AutoGenerateColumns="False"
                    CanUserSortColumns="False"
                    ItemsSource="{Binding FlowSteps}"
                    SelectedItem="{Binding SelectedFlowStep, Mode=TwoWay}"
                    CanUserAddRows="False"
                    SelectionMode="Single"
                    Margin="0,0,0,5">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding StepName}" Header="流程名称" IsReadOnly="True"/>
                        <DataGridTextColumn Binding="{Binding ImageIndex}" Header="图片运行索引"/>
                        <DataGridTextColumn Binding="{Binding RetPcs}" Header="PCS 排序结果"/>
                    </DataGrid.Columns>
                        
                </DataGrid>
            </Grid>
        </GroupBox>

        <Grid Grid.Column="1" Margin="30,15,30,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Label Grid.Row="0"
                   Content="{Binding TotalPCS}"
                   HorizontalAlignment="Left"
                   Margin="0,0,0,10"/>


            <!-- 方案流程选择 -->
            <ComboBox Grid.Row="1"
                      hc:InfoElement.Title="方案流程:"
                      ItemsSource="{Binding FlowTypes}"
                      SelectedItem="{Binding SelectedFlowType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      Style="{StaticResource ComboBoxExtend}"
                      Margin="0,0,0,10"
                      IsSynchronizedWithCurrentItem="False"/>

            <!-- 分隔线 -->
            <hc:Divider Grid.Row="2"
                        LineStrokeThickness="1"
                        Orientation="Horizontal"
                        Margin="0,0,0,10"/>

            <!-- 添删按钮组 -->
            <Grid Grid.Row="3" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        Content="删除"
                        Command="{Binding DeleteSelectedFlowStepCommand}"
                        Width="90"
                        Height="35"
                        HorizontalAlignment="Left"/>

                <hc:Divider Grid.Column="1"
                            LineStrokeThickness="2"
                            LineStroke="{DynamicResource DarkPrimaryBrush}"
                            Orientation="Vertical"
                            MaxHeight="16"
                            HorizontalAlignment="Center"/>

                <Button Grid.Column="2"
                        Content="添加"
                        Command="{Binding AddFlowStepCommand}"
                        Height="35"
                        Width="90"
                        HorizontalAlignment="Right"/>
            </Grid>

            <!-- 保存配置按钮 -->
            <Button Grid.Row="4"
                    Height="40"
                    Content="配置PCS序号"
                    Command="{Binding ConfigPcsCommand}"
                    HorizontalAlignment="Stretch"/>
            
            <!-- 保存配置按钮 -->
            <Button Grid.Row="5"
                    Height="40"
                    Margin="0,10,0,0"
                    Content="保存配置"
                    Command="{Binding SaveConfigCommand}"
                    HorizontalAlignment="Stretch"/>
        </Grid>
    </Grid>

</UserControl>
